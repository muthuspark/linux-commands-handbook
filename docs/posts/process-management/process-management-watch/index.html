<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Muthukrishnan">
<meta name="dcterms.date" content="2024-05-27">
<meta name="description" content="Explore Linux commands. Free knowledge sharing under MIT License.">

<title>watch – Linux Commands Handbook</title>
<style>
html {
  color: #1a1a1a;
  background-color: #fdfdfd;
}
body {
  margin: 0 auto;
  max-width: 36em;
  padding-left: 50px;
  padding-right: 50px;
  padding-top: 50px;
  padding-bottom: 50px;
  hyphens: auto;
  overflow-wrap: break-word;
  text-rendering: optimizeLegibility;
  font-kerning: normal;
}
@media (max-width: 600px) {
  body {
    font-size: 0.9em;
    padding: 12px;
  }
  h1 {
    font-size: 1.8em;
  }
}
@media print {
  html {
    background-color: white;
  }
  body {
    background-color: transparent;
    color: black;
    font-size: 12pt;
  }
  p, h2, h3 {
    orphans: 3;
    widows: 3;
  }
  h2, h3, h4 {
    page-break-after: avoid;
  }
}
p {
  margin: 1em 0;
}
a {
  color: #1a1a1a;
}
a:visited {
  color: #1a1a1a;
}
img {
  max-width: 100%;
}
svg {
  height; auto;
  max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
  margin-top: 1.4em;
}
h5, h6 {
  font-size: 1em;
  font-style: italic;
}
h6 {
  font-weight: normal;
}
ol, ul {
  padding-left: 1.7em;
  margin-top: 1em;
}
li > ol, li > ul {
  margin-top: 0;
}
ul > li:not(:has(> p)) > ul,
ol > li:not(:has(> p)) > ul,
ul > li:not(:has(> p)) > ol,
ol > li:not(:has(> p)) > ol {
  margin-bottom: 0;
}
ul > li:not(:has(> p)) > ul > li:has(> p),
ol > li:not(:has(> p)) > ul > li:has(> p),
ul > li:not(:has(> p)) > ol > li:has(> p),
ol > li:not(:has(> p)) > ol > li:has(> p) {
  margin-top: 1rem;
}
blockquote {
  margin: 1em 0 1em 1.7em;
  padding-left: 1em;
  border-left: 2px solid #e6e6e6;
  color: #606060;
}
code {
  font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
  font-size: 85%;
  margin: 0;
  hyphens: manual;
}
pre {
  margin: 1em 0;
  overflow: auto;
}
pre code {
  padding: 0;
  overflow: visible;
  overflow-wrap: normal;
}
.sourceCode {
 background-color: transparent;
 overflow: visible;
}
hr {
  background-color: #1a1a1a;
  border: none;
  height: 1px;
  margin: 1em 0;
}
table {
  margin: 1em 0;
  border-collapse: collapse;
  width: 100%;
  overflow-x: auto;
  display: block;
  font-variant-numeric: lining-nums tabular-nums;
}
table caption {
  margin-bottom: 0.75em;
}
tbody {
  margin-top: 0.5em;
  border-top: 1px solid #1a1a1a;
  border-bottom: 1px solid #1a1a1a;
}
th {
  border-top: 1px solid #1a1a1a;
  padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
  padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
  margin-bottom: 4em;
  text-align: center;
}
#TOC li {
  list-style: none;
}
#TOC ul {
  padding-left: 1.3em;
}
#TOC > ul {
  padding-left: 0;
}
#TOC a:not(:hover) {
  text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<link href="../../../favicon.ico" rel="icon">
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-T5MFF1D7PZ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-T5MFF1D7PZ', { 'anonymize_ip': true});
</script>
<link rel="icon" type="image/x-icon" href="../../../favicon.ico">
<meta property="og:title" content="watch – Linux Commands Handbook">
<meta property="og:site_name" content="Linux Commands Handbook">
</head><body><div class="navigation-header">
    <nav>
        <div>
            <div class="logo">
                <a href="../../../" aria-label="Home">
                    <span>Linux Commands Handbook - Home</span>
                </a>
            </div>
            <div class="nav-menu">
                <ul>
                    <li>
                        <a href="../../../about.html">
                            <span class="menu-text">About</span>
                        </a>
                    </li>
                    <li> 
                        <a href="https://github.com/muthuspark" target="_blank">
                            <span class="menu-text">Github</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://linkedin.com/in/krimuthu" target="_blank">
                            <span class="menu-text">Linkedin</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>


<link rel="stylesheet" href="../../../styles.css">





<header id="title-block-header">
<h1 class="title">watch</h1>

<p class="date">2024-05-27</p>
</header>


<h2 id="understanding-the-watch-command">Understanding the <code>watch</code> Command</h2>
<p>The <code>watch</code> command executes a specified command at regular intervals, displaying the output in a continuously updated window. This makes it ideal for monitoring processes, system load, network activity, and much more. Its primary use case in process management is observing the changes in running processes over time.</p>
<p>The basic syntax is:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="pp">[</span><span class="ss">options</span><span class="pp">]</span> command</span></code></pre></div>
<p>Where <code>command</code> is any command you’d like to monitor, and <code>options</code> allow for customization (we’ll look at these shortly).</p>
<h2 id="basic-process-monitoring-with-watch">Basic Process Monitoring with <code>watch</code></h2>
<p>Let’s start with a simple example: monitoring the top 5 CPU-consuming processes using <code>top</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 2 top <span class="at">-bn1</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 15</span></code></pre></div>
<p>This command does the following:</p>
<ul>
<li><code>watch</code>: Invokes the <code>watch</code> command.</li>
<li><code>-n 2</code>: Specifies an update interval of 2 seconds. The default is 2 seconds.</li>
<li><code>top -bn1</code>: Executes the <code>top</code> command. <code>-b</code> runs <code>top</code> in batch mode, and <code>-n 1</code> tells it to only run a single iteration. This is for <code>watch</code>; otherwise, <code>top</code> would constantly scroll and be unreadable.</li>
<li><code>head -n 15</code>: Takes only the top 15 lines of <code>top</code>’s output to prevent the display from becoming overwhelmingly large.</li>
</ul>
<p>This will display a continuously updating view of the top 5 processes, updated every 2 seconds.</p>
<h2 id="monitoring-specific-processes">Monitoring Specific Processes</h2>
<p>You might need to focus on particular processes. Using <code>ps</code> in conjunction with <code>grep</code> allows you to achieve this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 1 <span class="st">'ps aux | grep "my_process"'</span></span></code></pre></div>
<p>Replace <code>"my_process"</code> with the name of the process you’re interested in. This command monitors all processes containing “my_process” in their command line, updating every second. Remember that <code>grep</code> is case-sensitive, so ensure your process name matches exactly.</p>
<h2 id="using-watch-with-other-process-management-commands">Using <code>watch</code> with Other Process Management Commands</h2>
<p><code>watch</code> is flexible and works well with many other process management commands. For instance, you can monitor memory usage of a specific process using <code>pmap</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 5 <span class="st">'pmap $(pgrep my_process)'</span></span></code></pre></div>
<p>This command will update every 5 seconds, showing the memory map of the process named “my_process”. Remember to replace <code>"my_process"</code> with your target process.</p>
<h2 id="advanced-options-with-watch">Advanced Options with <code>watch</code></h2>
<p>The <code>watch</code> command offers many options to refine monitoring:</p>
<ul>
<li><code>-d</code>: Highlights changes between updates. This is very helpful for spotting fluctuations.</li>
<li><code>-c</code>: Clears the screen before each update, offering cleaner output.</li>
<li><code>-g</code>: Uses <code>less</code> to view the output, enabling scrolling through past updates.</li>
<li><code>-t</code>: Suppresses the header that shows the command and elapsed time.</li>
</ul>
<h2 id="combining-commands-for-powerful-monitoring">Combining Commands for Powerful Monitoring</h2>
<p>The true power of <code>watch</code> lies in its ability to combine commands. You can chain commands together to create detailed process monitoring solutions tailored to your specific needs. For instance, you could combine <code>ps</code>, <code>grep</code>, <code>awk</code>, and <code>sort</code> to track various metrics of a specific process.</p>
<h2 id="example-monitoring-cpu-and-memory-usage-of-a-specific-process">Example: Monitoring CPU and Memory Usage of a Specific Process</h2>
<p>Let’s create a more advanced example that combines many commands to monitor both CPU and memory usage of a process named “myapp”:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">watch</span> <span class="at">-n</span> 2 <span class="st">'ps aux | grep "myapp" | awk "{print \$2, \$3, \$4}" | sort -k3 -nr | head -n 5'</span></span></code></pre></div>
<p>This command does the following:</p>
<ol type="1">
<li>Lists all processes with <code>ps aux</code>.</li>
<li>Filters for the process “myapp” using <code>grep</code>.</li>
<li>Extracts the PID, %CPU, and %MEM using <code>awk</code>.</li>
<li>Sorts processes by %MEM usage in descending order (<code>sort -k3 -nr</code>).</li>
<li>Displays the top 5 processes using <code>head</code>.</li>
</ol>
<p>This provides a concise, real-time view of the resource consumption of your target process. Remember to replace <code>"myapp"</code> with your process name. Experiment with different combinations of commands and options to tailor your monitoring to your requirements.</p>


<footer>
    <p>© 2024 · Content on this site is licensed under the <a href="https://opensource.org/licenses/MIT">MIT License</a> · Built with ♥</p>
</footer>




</body></html>